add_library(tinyproto INTERFACE)

target_sources(tinyproto INTERFACE
  "${CMAKE_CURRENT_LIST_DIR}/tinyproto/unittest/fd_tests.cpp"
  "${CMAKE_CURRENT_LIST_DIR}/tinyproto/unittest/main.cpp"
  "${CMAKE_CURRENT_LIST_DIR}/tinyproto/unittest/packet_tests.cpp"
  "${CMAKE_CURRENT_LIST_DIR}/tinyproto/unittest/hdlc_tests.cpp"
  "${CMAKE_CURRENT_LIST_DIR}/tinyproto/unittest/light_tests.cpp"
  "${CMAKE_CURRENT_LIST_DIR}/tinyproto/unittest/hal_tests.cpp"
  "${CMAKE_CURRENT_LIST_DIR}/tinyproto/unittest/helpers/fake_endpoint.cpp"
  "${CMAKE_CURRENT_LIST_DIR}/tinyproto/unittest/helpers/tiny_base_helper.cpp"
  "${CMAKE_CURRENT_LIST_DIR}/tinyproto/unittest/helpers/tiny_hdlc_helper.cpp"
  "${CMAKE_CURRENT_LIST_DIR}/tinyproto/unittest/helpers/fake_connection.cpp"
  "${CMAKE_CURRENT_LIST_DIR}/tinyproto/unittest/helpers/tiny_light_helper.cpp"
  "${CMAKE_CURRENT_LIST_DIR}/tinyproto/unittest/helpers/tiny_fd_helper.cpp"
  "${CMAKE_CURRENT_LIST_DIR}/tinyproto/unittest/helpers/fake_wire.cpp"
  "${CMAKE_CURRENT_LIST_DIR}/tinyproto/src/TinyProtocolHdlc.cpp"
  "${CMAKE_CURRENT_LIST_DIR}/tinyproto/src/TinyLightProtocol.cpp"
  "${CMAKE_CURRENT_LIST_DIR}/tinyproto/src/TinyProtocolFd.cpp"
  "${CMAKE_CURRENT_LIST_DIR}/tinyproto/examples/esp32_idf/uart/tinyfd_generator/main/main.cpp"
  "${CMAKE_CURRENT_LIST_DIR}/tinyproto/examples/esp32_idf/uart/tinyfd_loopback/main/main.cpp"
  "${CMAKE_CURRENT_LIST_DIR}/tinyproto/examples/linux/hdlc_demo/hdlc_demo.cpp"
  "${CMAKE_CURRENT_LIST_DIR}/tinyproto/examples/linux/hdlc_demo_multithread/hdlc_demo_multithread.cpp"
  "${CMAKE_CURRENT_LIST_DIR}/tinyproto/examples/linux/loopback/tiny_loopback.cpp"
  "${CMAKE_CURRENT_LIST_DIR}/tinyproto/python/main.cpp"
  "${CMAKE_CURRENT_LIST_DIR}/tinyproto/python/hdlc_ll.cpp"
  "${CMAKE_CURRENT_LIST_DIR}/tinyproto/python/fd.cpp"
  "${CMAKE_CURRENT_LIST_DIR}/tinyproto/tools/hal_template_functions/platform_hal.c"
  "${CMAKE_CURRENT_LIST_DIR}/tinyproto/src/proto/light/tiny_light.c"
  "${CMAKE_CURRENT_LIST_DIR}/tinyproto/src/proto/fd/tiny_fd.c"
  "${CMAKE_CURRENT_LIST_DIR}/tinyproto/src/proto/hdlc/low_level/hdlc.c"
  "${CMAKE_CURRENT_LIST_DIR}/tinyproto/src/proto/hdlc/high_level/hdlc.c"
  "${CMAKE_CURRENT_LIST_DIR}/tinyproto/src/proto/crc/tiny_crc.c"
  "${CMAKE_CURRENT_LIST_DIR}/tinyproto/src/hal/tiny_serial.c"
  "${CMAKE_CURRENT_LIST_DIR}/tinyproto/src/hal/tiny_list.c"
  "${CMAKE_CURRENT_LIST_DIR}/tinyproto/src/hal/tiny_types.c"
  "${CMAKE_CURRENT_LIST_DIR}/tinyproto/examples/esp32_idf/spi/slave/main/app_main.c"
  "${CMAKE_CURRENT_LIST_DIR}/tinyproto/examples/esp32_idf/spi/master/main/app_main.c"
  "${CMAKE_CURRENT_LIST_DIR}/tinyproto/unittest/helpers/fake_wire.h"
  "${CMAKE_CURRENT_LIST_DIR}/tinyproto/unittest/helpers/tiny_light_helper.h"
  "${CMAKE_CURRENT_LIST_DIR}/tinyproto/unittest/helpers/tiny_fd_helper.h"
  "${CMAKE_CURRENT_LIST_DIR}/tinyproto/unittest/helpers/semaphore_helper.h"
  "${CMAKE_CURRENT_LIST_DIR}/tinyproto/unittest/helpers/tiny_hdlc_helper.h"
  "${CMAKE_CURRENT_LIST_DIR}/tinyproto/unittest/helpers/fake_endpoint.h"
  "${CMAKE_CURRENT_LIST_DIR}/tinyproto/unittest/helpers/fake_connection.h"
  "${CMAKE_CURRENT_LIST_DIR}/tinyproto/unittest/helpers/tiny_base_helper.h"
  "${CMAKE_CURRENT_LIST_DIR}/tinyproto/src/TinyProtocolFd.h"
  "${CMAKE_CURRENT_LIST_DIR}/tinyproto/src/TinyProtocolHdlc.h"
  "${CMAKE_CURRENT_LIST_DIR}/tinyproto/src/TinyLightProtocol.h"
  "${CMAKE_CURRENT_LIST_DIR}/tinyproto/src/TinyProtocol.h"
  "${CMAKE_CURRENT_LIST_DIR}/tinyproto/src/TinyPacket.h"
  "${CMAKE_CURRENT_LIST_DIR}/tinyproto/src/proto/light/tiny_light.h"
  "${CMAKE_CURRENT_LIST_DIR}/tinyproto/src/proto/fd/tiny_fd.h"
  "${CMAKE_CURRENT_LIST_DIR}/tinyproto/src/proto/fd/tiny_fd_int.h"
  "${CMAKE_CURRENT_LIST_DIR}/tinyproto/src/proto/hdlc/low_level/hdlc.h"
  "${CMAKE_CURRENT_LIST_DIR}/tinyproto/src/proto/hdlc/low_level/hdlc_int.h"
  "${CMAKE_CURRENT_LIST_DIR}/tinyproto/src/proto/hdlc/high_level/hdlc.h"
  "${CMAKE_CURRENT_LIST_DIR}/tinyproto/src/proto/crc/tiny_crc.h"
  "${CMAKE_CURRENT_LIST_DIR}/tinyproto/src/hal/tiny_debug.h"
  "${CMAKE_CURRENT_LIST_DIR}/tinyproto/src/hal/tiny_list.h"
  "${CMAKE_CURRENT_LIST_DIR}/tinyproto/src/hal/tiny_serial.h"
  "${CMAKE_CURRENT_LIST_DIR}/tinyproto/src/hal/tiny_types.h"
  "${CMAKE_CURRENT_LIST_DIR}/tinyproto/src/hal/avr/avr_hal.h"
  "${CMAKE_CURRENT_LIST_DIR}/tinyproto/src/hal/mingw32/mingw32_hal.h"
  "${CMAKE_CURRENT_LIST_DIR}/tinyproto/src/hal/esp32/esp32_hal.h"
  "${CMAKE_CURRENT_LIST_DIR}/tinyproto/src/hal/arduino/arduino_hal.h"
  "${CMAKE_CURRENT_LIST_DIR}/tinyproto/src/hal/linux/linux_hal.h"
  "${CMAKE_CURRENT_LIST_DIR}/tinyproto/src/hal/linux/linux_serial.h"
  "${CMAKE_CURRENT_LIST_DIR}/tinyproto/src/hal/no_platform/no_platform_hal.h"
  "${CMAKE_CURRENT_LIST_DIR}/tinyproto/src/hal/no_platform/noplatform_serial.h"
  "${CMAKE_CURRENT_LIST_DIR}/tinyproto/src/hal/win32/win32_hal.h"
  "${CMAKE_CURRENT_LIST_DIR}/tinyproto/src/hal/win32/win32_serial.h"
  "${CMAKE_CURRENT_LIST_DIR}/tinyproto/python/hdlc_ll.h"
  "${CMAKE_CURRENT_LIST_DIR}/tinyproto/python/fd.h"
)

target_include_directories(tinyproto INTERFACE
 "${CMAKE_CURRENT_LIST_DIR}/tinyproto/src"
)

if (NOT TARGET arduino-compat)
    add_subdirectory(../../arduino-compat build_arduino-compat)
endif()

target_link_libraries(tinyproto INTERFACE
    arduino-compat
)
